<div class="addParticpant">
  <div class="container-fluid">
    <div class="row mt-4 mb-3 pb-3">
      <div class="col-sm-12 text-right">
        <button type="button" class="btn btn-info" routerLink="/admin/addparticipant">Add
          Participant</button>
      </div>
    </div>
    <!-- Filter Section -->
    <div class="row">
      <div class="col">
        <div class="row gridFilters">
          <div class="col-sm-3 col-lg-2">
            <div class="form-group">
              <input [(ngModel)]="filterCriteria.plan" [typeahead]="planDataSource"
                (typeaheadNoResults)="changeTypeaheadPlanNoResults($event)"
                (typeaheadOnSelect)="typeaheadOnSelectPlan($event)" [typeaheadMinLength]="3"
                typeaheadOptionField="planVersion.name" [typeaheadScrollable]="true"
                [typeaheadOptionsInScrollableView]="8" placeholder="Enter Plan." name="plans"
                class="form-control inputStart" autocomplete="off">
              <div *ngIf="typeaheadPlanNoResults">
                <i class="fa fa-remove"></i> {{ 'No Results Found'}}
              </div>
            </div>
          </div>
          <div class="col-sm-3 col-lg-2">
            <div class="form-group">
              <input [(ngModel)]="filterCriteria.cluster" [typeahead]="clusterDataSource"
                (typeaheadNoResults)="changeTypeaheadClusterNoResults($event)" [typeaheadMinLength]="0"
                typeaheadOptionField="governingEntityVersion.name" placeholder="Enter Cluster." name="clusters"
                [typeaheadScrollable]="true" [typeaheadOptionsInScrollableView]="8" class="form-control inputStart"
                autocomplete="off" (typeaheadOnSelect)="typeaheadOnSelectCluster($event)" disabled="{{!enableCluster}}">
              <div *ngIf="typeaheadClusterNoResults">
                <i class="fa fa-remove"></i> {{ 'No Results Found'}}
              </div>
            </div>
          </div>
          <div class="col-sm-3 col-lg-2">
            <div class="form-group">
              <input [(ngModel)]="filterCriteria.role" [typeahead]="roleDataSource"
                (typeaheadNoResults)="changeTypeaheadRoleNoResults($event)" [typeaheadMinLength]="0"
                [typeaheadScrollable]="true" [typeaheadOptionsInScrollableView]="8" typeaheadOptionField="description"
                placeholder="Enter Role." name="roles" class="form-control inputStart" autocomplete="off"
                (typeaheadOnSelect)="typeaheadOnSelectRole($event)">
              <div *ngIf="typeaheadRoleNoResults">
                <i class="fa fa-remove"></i> {{ 'No Results Found'}}
              </div>
            </div>
          </div>
          <div class="col-sm-3 col-lg-2">
            <div class="form-group">
              <input [(ngModel)]="filterCriteria.organization" [typeahead]="organizationDataSource"
                (typeaheadNoResults)="changeTypeaheadOrganizationNoResults($event)" [typeaheadMinLength]="3"
                typeaheadOptionField="name" placeholder="Enter Organization." name="organizations"
                [typeaheadScrollable]="true" [typeaheadOptionsInScrollableView]="8" class="form-control inputStart"
                autocomplete="off" (typeaheadOnSelect)="typeaheadOnSelectOrganization($event)">
              <div *ngIf="typeaheadOrganizationNoResults">
                <i class="fa fa-remove"></i> {{ 'No Results Found'}}
              </div>
            </div>
          </div>
          <div class="col-sm-3 col-lg-2">
            <div class="form-group">
              <!-- <input type="text" class="form-control" placeholder="Enter Email" [(ngModel)]="filterCriteria.name"> -->
              <input [(ngModel)]="filterCriteria.name" [typeahead]="participantDataSource"
                (typeaheadNoResults)="changeTypeaheadPartcipantNoResults($event)" [typeaheadMinLength]="3"
                [typeaheadScrollable]="true" [typeaheadOptionsInScrollableView]="8" typeaheadOptionField="email"
                placeholder="Enter Email." name="participants" class="form-control inputStart" autocomplete="off"
                (typeaheadOnSelect)="typeaheadOnSelectParticipants($event)">
              <div *ngIf="typeaheadParticipantNoResults">
                <i class="fa fa-remove"></i> {{ 'No Results Found'}}
              </div>
            </div>
          </div>
          <div class="col-sm-3 col-lg-2">
            <div class="form-group">
              <button (click)="GetParticipants()" class="btn btn-primary" type="button">Search</button>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-10">
            <div class="row " *ngIf="filterExpression.plan?.length > 0">
              <div class="col-sm-8"> <strong>Plan : </strong> {{GetNames(filterExpression.plan)}} <span
                  class="text-danger font-weight-bold"><a href="javascript:void(0)" (click)="clearFilters('plan')" title="Clear">X</a></span></div>

            </div>
            <div class="row" *ngIf="filterExpression.cluster?.length > 0 
                && (filterExpression.plan?.length > 0)">
              <div class="col-sm-8 text-danger"> OR </div>
            </div>
            <div class="row " *ngIf="filterExpression.cluster?.length > 0">
              <div class="col-sm-8"> <strong> Cluster :</strong> {{GetNames(filterExpression.cluster)}}<span
                  class="text-danger font-weight-bold"><a href="javascript:void(0)" (click)="clearFilters('cluster')" title="Clear">X</a></span> </div>
            </div>
            <div class="row " *ngIf="filterExpression.role?.length > 0 
                && (filterExpression.cluster?.length > 0 || filterExpression.plan?.length > 0)">
              <div class="col-sm-8 text-danger"> OR </div>
            </div>
            <div class="row " *ngIf="filterExpression.role?.length > 0">
              <div class="col-sm-8"><strong> Role : </strong>{{GetNames(filterExpression.role)}}<span
                  class="text-danger font-weight-bold"><a href="javascript:void(0)" (click)="clearFilters('role')" title="Clear">X</a></span></div>
            </div>
            <div class="row " *ngIf="filterExpression.organization?.length > 0
                 && (filterExpression.role?.length > 0 || filterExpression.cluster?.length > 0 
                 || filterExpression.plan?.length > 0)">
              <div class="col-sm-8 text-danger"> OR </div>
            </div>
            <div class="row " *ngIf="filterExpression.organization?.length > 0">
              <div class="col-sm-8"> <strong>Organization :</strong> {{GetNames(filterExpression.organization)}}<span
                  class="text-danger font-weight-bold"><a href="javascript:void(0)" (click)="clearFilters('organization')" title="Clear">X</a></span>
              </div>
            </div>
            <div class="row" *ngIf="filterExpression.email.length > 0
                 && (filterExpression.organization.length > 0 || filterExpression.role?.length > 0
                  || filterExpression.cluster?.length > 0 || filterExpression.plan?.length > 0)">
              <div class="col-sm-8 text-danger"> OR </div>
            </div>
            <div class="row" *ngIf="filterExpression.email?.length > 0">
              <div class="col-sm-8"><strong> Email :</strong> {{GetNames(filterExpression.email)}}<span
                  class="text-danger font-weight-bold"><a href="javascript:void(0)" (click)="clearFilters('email')" title="Clear">X</a></span></div>
            </div>
          </div>
          <div class="col-sm-2">
            <div class="row" *ngIf="isEnableSearchPanel">
              <div class="col-sm-12"> <button href="javascript:void(0)" (click)="clearFilters()" title="Clear Filters"
                  type="button" class="btn btn-info">Clear</button></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Filter Section -->
    <!-- Grid Section -->
    <div class="row mt-3">
      <div class="col-sm-12">
        <div class="table-responsive">
          <table class="table table-striped table-bordered tblGrid" *ngIf="participants?.length > 0"
            [mfData]="participants" #mf="mfDataTable" [mfRowsOnPage]="25">
            <thead>
              <tr class="bg-light">
                <th colspan="6" class="text-right"><a href="javascript:void(0)" (click)="ExportToXLS()"
                    title="Download Excel"><i class="fa fa-file-excel-o fa-2x" aria-hidden="true"></i></a></th>
              </tr>
              <tr class="bg-light">
                <th width="12%">First Name</th>
                <th width="13%">Family Name</th>
                <th width="20%">Email</th>
                <th width="25%">HidId</th>
                <th width="15%">Roles</th>
                <th width="10%">Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let participant of mf.data">
                <td>{{participant.name_given}}</td>
                <td>{{participant.name_family}}</td>
                <td>{{participant.email}}</td>
                <td>{{participant.hidId}}</td>
                <td>{{GetRolesList(participant.roles)}}</td>
                <td align="center"><a href="javascript:;" class="editIcon" title="Edit"
                    [routerLink]="['/admin/editparticipant',participant.id]"><i class="fa fa-pencil-square-o"></i></a>
                </td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="6">
                  <mfBootstrapPaginator [rowsOnPageSet]="[25,50,100]"></mfBootstrapPaginator>
                </td>
              </tr>
            </tfoot>
          </table>
          <div *ngIf="participants?.length ==0" class="text-danger">
            No Participants Found..
          </div>
        </div>
      </div>
    </div>
    <!-- Grid Section -->
  </div>
</div>
<div class="loaderMainPanel" *ngIf="apiService.inProgress">
  <div class="project-page-loader">
    <i class="fa fa-circle-o-notch fa-spin"></i>
  </div>
</div>