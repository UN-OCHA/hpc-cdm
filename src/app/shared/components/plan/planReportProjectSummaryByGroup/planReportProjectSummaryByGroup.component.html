<div class="container reports" *ngIf="group">
  <div class="row summary">
    <div class="col-lg-7">
      <a class="back"
        *ngIf="plan"
         [routerLink]="['/plan', plan.id, 'report']">
        <i class="fa fa-angle-left"></i>
        Back to Plan {{ plan.name }}
      </a>
      <h1>{{ group.projects.length }} Projects for {{ groupByParam | unCamelCase }}: {{ group[nameKey] }}</h1>
    </div>
    <div class="report-controls col-lg-5">

      <app-filter-options-modal
        [filtersByField]="filterByFields"
        [filterByStatus]="filterByStatus"
        (onStatusesUpdate)="updateStatuses($event)"
        [dataUpdatedObservable$]="dataUpdatedObservable$"
        [filterOnFields]="getFilterOnFields()"
        >
      </app-filter-options-modal>

      <button
        class="btn btn-outline-primary export"
        (click)="exportData()">
        <i class="fa fa-download"></i>
        Export
      </button>
    </div>
  </div>
  <div class="row breakdown">
    <div class="col-lg-12">
      <table>
        <thead>
          <tr>
            <th class="code">Project Code</th>
            <th class="name">Name</th>
            <th class="governing-entity">Cluster</th>
            <th class="status">Status</th>
            <th class="funds number">Requested Funds</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let project of group.projects">
            <td class="text">
              <a [routerLink]="['/project', project.id, 'edit']">
                {{project.code}}
              </a>
            </td>
            <td>{{project.name}}</td>
            <td>
              {{ project.governingEntities.join(', ') }}
            </td>
            <td>
              <span class="badge status-indicator" *ngFor="let status of project.status">
                {{ status['label']['en'] }}
              </span>
            </td>
            <td class="number">{{project.requestedFunds | currency:'USD':'symbol':'1.0-0'}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
