<form class="edit" (ngSubmit)="onSubmit()" [formGroup]="form">  
  <hpc-input
    label="RefCode"
    [formControl]="form.controls['refCode']"
    (input)="clearErrors()"
    [ngClass]="{ 'is-invalid': submitted && f.refCode.errors }"
    required></hpc-input>

  <hpc-input
    label="Type"
    [formControl]="form.controls['refType']"
    (input)="clearErrors()"
    [ngClass]="{ 'is-invalid': submitted && f.refType.errors }"
    required></hpc-input>

  <ng-container *ngIf="(prototype$ | async) as prototype; else emptyjson">
    <json-editor
      [json]="prototype.value"
      (change)="onJsonChange($event)"></json-editor>
  </ng-container>
  <ng-template #emptyjson>
    <json-editor [json]="{}" (change)="onJsonChange($event)"></json-editor>
  </ng-template>

  <div *ngIf="(operation$ | async) as operation" class="actions">
    <a mat-raised-button [routerLink]="['/operations', operation.id, 'eprototypes']">Close</a>
    <a mat-raised-button color="warn" type="submit" [disabled]="!form.valid">Save</a>
  </div>
</form>
